     1                                 %line 1+1 minibash.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 [section .data]
     8 00000000 4D696E692D42617368-    title db "Mini-Bash",0
     9 00000000 00                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 [section .bss]
    15 00000000 <gap>                  windows resq 1
    16 00000008 <gap>                  keyStore resb 1
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 [section .text]
    24                                 [extern printf]
    25                                 [extern SDL_InitSubSystem]
    26                                 [extern SDL_Quit]
    27                                 [extern SDL_CreateWindow]
    28                                 [extern SDL_DestroyWindow]
    29                                 [extern SDL_Delay]
    30                                 [extern SDL_Event]
    31                                 [extern SDL_PollEvent]
    32                                 [extern eventLoop]
    33                                 [global main]
    34                                 
    35                                 
    36                                 
    37                                 
    38                                 
    39                                 main:
    40 00000000 55                     push rbp
    41 00000001 4889E5                 mov rbp,rsp
    42                                 
    43                                 
    44 00000004 48C7C720000000         mov rdi,0x20
    45 0000000B E8(F6FFFFFF)           call SDL_InitSubSystem
    46                                 
    47                                 
    48 00000010 488D3C25[00000000]     lea rdi,[title]
    49 00000018 48C7C664000000         mov rsi,100
    50 0000001F 48C7C264000000         mov rdx,100
    51 00000026 48C7C1F4010000         mov rcx,500
    52 0000002D 49C7C0F4010000         mov r8,500
    53 00000034 49C7C120000000         mov r9,0x20
    54 0000003B E8(F6FFFFFF)           call SDL_CreateWindow
    55 00000040 4883F800               cmp rax,0
    56 00000044 7418                   jz end
    57                                 
    58                                 saveCreatedWindows:
    59 00000046 48890425[00000000]     mov qword[windows],rax
    60 0000004E E8(F6FFFFFF)           call eventLoop
    61                                 
    62 00000053 488B3C25[00000000]     mov rdi,qword[windows]
    63 0000005B E8(F6FFFFFF)           call SDL_DestroyWindow
    64                                 
    65                                 end:
    66 00000060 E8(F6FFFFFF)           call SDL_Quit
    67 00000065 5D                     pop rbp
    68 00000066 4831C0                 xor rax,rax
    69 00000069 C3                     ret
